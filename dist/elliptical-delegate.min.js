!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-event")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-event"],t):(e.elliptical.Delegate=t(e.elliptical,e.elliptical.Event),e.returnExports=e.elliptical.Delegate)}(this,function(e,t){var n=e.Class.extend({bindings:null,init:function(e){this.bindings=e},on:function(){function e(e,t){$(document).on(e,'[delegate="'+t+'"]',function(t){n(e,"delegate-target")&&a(t)}),$(document).on(e,'[data-delegate="'+t+'"]',function(e){n(e,"data-delegate-target")&&a(e)})}function n(e,t){return e.target===e.currentTarget?!0:void 0!==$(e.currentTarget).attr(t)}function a(e){var n,a,l,i=$(e.currentTarget);l=!1,n=i.attr(i.attr("event")?"event":"data-event"),a=i.attr(i.attr("channel")?"channel":"data-channel"),i.attr("camel-case")?l=i.attr("camel-case"):i.attr("data-camel-case")&&(l=i.attr("data-camel-case"));var c=$.element.getOpts(i[0],l);c.channel&&delete c.channel,c.event&&delete c.event,c.delegate&&delete c.delegate,c.camelCase&&delete c.camelCase,c.target=i[0],"undefined"!=typeof a&&"sync"!==n&&t.emit(a+"."+n,c)}var l=this.bindings;l&&l.length&&l.forEach(function(t){var n=t.event,a=t.delegate;e(n,a)})},off:function(){function e(e,t){$(document).off(event,'[delegate="'+t+'"]'),$(document).on(e,'[data-delegate="'+t+'"]')}var t=this.bindings;t&&t.length&&t.forEach(function(t){var n=t.event,a=t.delegate;e(n,a)})}});return n});